[{"id":"660cf0f8.c0b42","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"ab63dab7.3be17","type":"mqtt-broker","z":"","name":"broker","broker":"broker","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"willTopic":"","willQos":"0","willPayload":"","birthTopic":"","birthQos":"0","birthPayload":""},{"id":"a78fa4cf.e818e8","type":"http request","z":"660cf0f8.c0b42","name":"","method":"GET","ret":"obj","url":"https://opendata.paris.fr/api/records/1.0/search/?dataset=autolib-disponibilite-temps-reel&q=boulognebillancourt-henrimartin-2 OR paris-portesaintcloud-parking OR boulognebillancourt-reine-12","tls":"","x":130,"y":260,"wires":[["bbb56e40.26f018"]]},{"id":"46a2ca5f.0c0254","type":"inject","z":"660cf0f8.c0b42","name":"every min","topic":"","payload":"","payloadType":"date","repeat":"20","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":180,"wires":[["a78fa4cf.e818e8"]]},{"id":"c0892c62.445c08","type":"rbe","z":"660cf0f8.c0b42","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":330,"y":320,"wires":[["d284e4a4.b8d088","229cefb9.38c49","205e9dcf.04d1a2","8af79fa.bef97e"]]},{"id":"8af79fa.bef97e","type":"function","z":"660cf0f8.c0b42","name":"boulognebillancourt-henrimartin-2","func":"\n\nmsg.payload = msg.payload.records[0];\ndelete msg.headers;\ndelete msg.responseUrl;\ndelete msg.statusCode;\n\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":500,"wires":[["7fe5f506.34b73c"]]},{"id":"7fe5f506.34b73c","type":"mqtt out","z":"660cf0f8.c0b42","name":"/autolib/boulognebillancourt/henrimartin/2","topic":"/autolib/boulognebillancourt/henrimartin/2","qos":"1","retain":"false","broker":"ab63dab7.3be17","x":880,"y":500,"wires":[]},{"id":"205e9dcf.04d1a2","type":"function","z":"660cf0f8.c0b42","name":"boulognebillancourt-reine-12","func":"\nmsg.payload = msg.payload.records[1];\ndelete msg.headers;\ndelete msg.responseUrl;\ndelete msg.statusCode;\n\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":440,"wires":[["71e7155a.0f2834"]]},{"id":"229cefb9.38c49","type":"function","z":"660cf0f8.c0b42","name":"paris-portesaintcloud-parking","func":"\nmsg.payload = msg.payload.records[2];\ndelete msg.headers;\ndelete msg.responseUrl;\ndelete msg.statusCode;\n\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":380,"wires":[["9c0298d0.c8666"]]},{"id":"71e7155a.0f2834","type":"mqtt out","z":"660cf0f8.c0b42","name":"/autolib/boulognebillancourt/reine/12","topic":"/autolib/boulognebillancourt/reine/12","qos":"1","retain":"false","broker":"ab63dab7.3be17","x":870,"y":440,"wires":[]},{"id":"9c0298d0.c8666","type":"mqtt out","z":"660cf0f8.c0b42","name":"/autolib/paris/portesaintcloud/parking","topic":"/autolib/paris/portesaintcloud/parking","qos":"","retain":"","broker":"ab63dab7.3be17","x":870,"y":380,"wires":[]},{"id":"d284e4a4.b8d088","type":"function","z":"660cf0f8.c0b42","name":"lastCall","func":"\nmsg.payload = msg.headers.date;\ndelete msg.headers;\ndelete msg.responseUrl;\ndelete msg.statusCode;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":320,"wires":[["e978aaff.cc979"]]},{"id":"e978aaff.cc979","type":"mqtt out","z":"660cf0f8.c0b42","name":"/autolib/_lastCall","topic":"/autolib/_lastCall","qos":"","retain":"","broker":"ab63dab7.3be17","x":810,"y":320,"wires":[]},{"id":"bbb56e40.26f018","type":"function","z":"660cf0f8.c0b42","name":"if no Error","func":"\nif(msg.statusCode == 200) {\n    return msg;\n} else {\n    node.error(msg)\n}","outputs":1,"noerr":0,"x":180,"y":320,"wires":[["c0892c62.445c08"]]}]